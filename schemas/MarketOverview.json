{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ainvest.app/schemas/MarketOverview.json",
  "title": "MarketOverview",
  "description": "Visão geral do mercado com índices e indicadores macro",
  "type": "object",
  "required": ["ibov", "ifix", "sp500Proxy", "usdBrl", "selic", "cdi", "updatedAt", "marketStatus"],
  "properties": {
    "ibov": {
      "$ref": "#/definitions/MarketIndex",
      "description": "Índice IBOVESPA"
    },
    "ifix": {
      "$ref": "#/definitions/MarketIndex",
      "description": "Índice IFIX (Fundos Imobiliários)"
    },
    "sp500Proxy": {
      "$ref": "#/definitions/MarketIndex",
      "description": "IVVB11 como proxy do S&P 500"
    },
    "usdBrl": {
      "type": "object",
      "description": "Cotação do dólar americano",
      "required": ["buy", "sell", "change", "updatedAt"],
      "properties": {
        "buy": {
          "type": "number",
          "description": "Cotação de compra",
          "minimum": 0,
          "examples": [5.25]
        },
        "sell": {
          "type": "number",
          "description": "Cotação de venda",
          "minimum": 0,
          "examples": [5.26]
        },
        "change": {
          "type": "number",
          "description": "Variação percentual",
          "examples": [0.15, -0.30]
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Data/hora da última atualização"
        }
      },
      "additionalProperties": false
    },
    "selic": {
      "type": "number",
      "description": "Taxa SELIC atual (% ao ano)",
      "minimum": 0,
      "maximum": 100,
      "examples": [12.75, 13.25]
    },
    "cdi": {
      "type": "number",
      "description": "Taxa CDI atual (% ao ano)",
      "minimum": 0,
      "maximum": 100,
      "examples": [12.65, 13.15]
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp da resposta"
    },
    "marketStatus": {
      "$ref": "#/definitions/MarketStatus"
    }
  },
  "additionalProperties": false,
  "definitions": {
    "MarketIndex": {
      "type": "object",
      "description": "Índice de mercado",
      "required": ["name", "value", "change", "changePercent", "updatedAt"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Nome do índice",
          "examples": ["IBOVESPA", "IFIX", "IVVB11"]
        },
        "value": {
          "type": "number",
          "description": "Valor atual do índice",
          "minimum": 0,
          "examples": [128500.00, 3150.00]
        },
        "change": {
          "type": "number",
          "description": "Variação absoluta",
          "examples": [1250.00, -15.00]
        },
        "changePercent": {
          "type": "number",
          "description": "Variação percentual",
          "examples": [0.98, -0.47]
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Data/hora da última atualização"
        }
      },
      "additionalProperties": false
    },
    "MarketStatus": {
      "type": "object",
      "description": "Status atual do mercado",
      "required": ["isOpen", "phase", "isHoliday"],
      "properties": {
        "isOpen": {
          "type": "boolean",
          "description": "Se o mercado está em horário de pregão"
        },
        "phase": {
          "type": "string",
          "enum": ["pre-market", "open", "after-hours", "closed"],
          "description": "Fase atual do mercado"
        },
        "nextOpen": {
          "type": ["string", "null"],
          "format": "date-time",
          "description": "Próxima abertura (se fechado)"
        },
        "isHoliday": {
          "type": "boolean",
          "description": "Se hoje é feriado"
        },
        "holidayName": {
          "type": ["string", "null"],
          "description": "Nome do feriado (se aplicável)"
        }
      },
      "additionalProperties": false
    }
  },
  "examples": [
    {
      "ibov": {
        "name": "IBOVESPA",
        "value": 128500.00,
        "change": 1250.00,
        "changePercent": 0.98,
        "updatedAt": "2026-02-03T17:00:00Z"
      },
      "ifix": {
        "name": "IFIX",
        "value": 3150.00,
        "change": -15.00,
        "changePercent": -0.47,
        "updatedAt": "2026-02-03T17:00:00Z"
      },
      "sp500Proxy": {
        "name": "IVVB11",
        "value": 285.50,
        "change": 3.20,
        "changePercent": 1.13,
        "updatedAt": "2026-02-03T17:00:00Z"
      },
      "usdBrl": {
        "buy": 5.25,
        "sell": 5.26,
        "change": 0.15,
        "updatedAt": "2026-02-03T17:00:00Z"
      },
      "selic": 12.75,
      "cdi": 12.65,
      "updatedAt": "2026-02-03T17:00:00Z",
      "marketStatus": {
        "isOpen": true,
        "phase": "open",
        "isHoliday": false
      }
    }
  ]
}
